name: Release

on:
  release:
    types: [prereleased,released] 
    
jobs:
  # ÁâàÊú¨Êõ¥Êñ∞ÔºàÂú®ÊûÑÂª∫‰πãÂâçÔºâ
  update-version:
    runs-on: ubuntu-latest
    
    permissions:
      contents: write
      actions: read
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          fetch-depth: 0

      - name: Set up Go
        uses: actions/setup-go@v4
        with:
          go-version: '1.24'

      - name: Extract version from tag and update file
        run: |
          TAG_NAME="${{ github.event.release.tag_name }}"
          VERSION=$(echo "$TAG_NAME" | sed -E 's/^v([0-9]+\.[0-9]+\.[0-9]+)-.*/\1/')
          echo "Extracted version: $VERSION"
          IS_PRERELEASE="${{ github.event.release.prerelease }}"
          echo "Is prerelease: $IS_PRERELEASE"

          # Switch to branch to allow pushing
          git checkout main || git checkout master
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          
          CHANGES=0

          # 1. Check and update mediaunlock.go
          CURRENT_VERSION=$(grep '^[[:space:]]*Version[[:space:]]*=' checks/mediaunlock.go | sed -E 's/.*Version[[:space:]]*=[[:space:]]*"([^"]+)".*/\1/')
          echo "Current version in file: $CURRENT_VERSION"
          
          if [ "$VERSION" != "$CURRENT_VERSION" ]; then
            echo "Version mismatch. Updating from $CURRENT_VERSION to $VERSION"
            sed -i "s/Version\s*=\s*\"[^\"]*\"/Version          = \"$VERSION\"/" checks/mediaunlock.go
            git add checks/mediaunlock.go
            CHANGES=1
          else
            echo "Version in mediaunlock.go is already up to date"
          fi
          
          # 2. Update VERSION file only if it's not a prerelease
          if [ "$IS_PRERELEASE" = "false" ]; then
            if [ -f VERSION ]; then
              FILE_TAG=$(cat VERSION)
            else
              FILE_TAG=""
            fi

            if [ "$TAG_NAME" != "$FILE_TAG" ]; then
              echo "Not a prerelease, updating VERSION file with $TAG_NAME"
              echo "$TAG_NAME" > VERSION
              echo "VERSION file content: $(cat VERSION)"
              git add VERSION
              CHANGES=1
            else
              echo "VERSION file is already up to date"
            fi
          else
            echo "Prerelease detected, skipping VERSION file update"
          fi

          # 3. Commit and push if any changes were made
          if [ "$CHANGES" -eq 1 ]; then
            git commit -m "Update version to $VERSION"
            git push origin HEAD
            echo "Version updated and committed"
          else
            echo "Nothing to commit, all versions are up to date."
          fi
        shell: bash

  # Âπ∂Ë°åÊûÑÂª∫‰∏çÂêåÂπ≥Âè∞ÁöÑ‰∫åËøõÂà∂Êñá‰ª∂
  build:
    needs: update-version
    strategy:
      matrix:
        project: [cli, monitor]
        platform: [
          # ‰∏ªË¶ÅÂπ≥Âè∞
          linux-amd64, linux-arm64, linux-386, linux-arm7, linux-arm6, linux-arm5,
          linux-loong64, linux-mips, linux-mips64, linux-mips64le, linux-mipsle,
          linux-ppc64, linux-ppc64le, linux-riscv64, linux-s390x,
          darwin-amd64, darwin-arm64,
          windows-amd64, windows-arm64, windows-386, windows-arm7, windows-arm6, windows-arm5,
          freebsd-amd64, freebsd-arm64, freebsd-386, freebsd-arm7, freebsd-arm6, freebsd-arm5, freebsd-riscv64,
          netbsd-amd64, netbsd-arm64, netbsd-386, netbsd-arm7, netbsd-arm6, netbsd-arm5,
          openbsd-amd64, openbsd-arm64, openbsd-386, openbsd-arm7, openbsd-arm6, openbsd-arm5, openbsd-ppc64
        ]
        include:
          # AndroidÂπ≥Âè∞ÈúÄË¶ÅCGOÊîØÊåÅ
          - project: cli
            platform: android-arm64
            os: android
            arch: arm64
            cgo: true
            api_level: 21
          - project: cli
            platform: android-amd64
            os: android
            arch: amd64
            cgo: true
            api_level: 21
          - project: cli
            platform: android-arm7
            os: android
            arch: arm
            cgo: true
            api_level: 21
            goarm: 7
          - project: cli
            platform: android-arm6
            os: android
            arch: arm
            cgo: true
            api_level: 21
            goarm: 6
          - project: cli
            platform: android-arm5
            os: android
            arch: arm
            cgo: true
            api_level: 21
            goarm: 5
          - project: cli
            platform: android-386
            os: android
            arch: 386
            cgo: true
            api_level: 21
          - project: monitor
            platform: android-arm64
            os: android
            arch: arm64
            cgo: true
            api_level: 21
          - project: monitor
            platform: android-amd64
            os: android
            arch: amd64
            cgo: true
            api_level: 21
          - project: monitor
            platform: android-arm7
            os: android
            arch: arm
            cgo: true
            api_level: 21
            goarm: 7
          - project: monitor
            platform: android-arm6
            os: android
            arch: arm
            cgo: true
            api_level: 21
            goarm: 6
          - project: monitor
            platform: android-arm5
            os: android
            arch: arm
            cgo: true
            api_level: 21
            goarm: 5
          - project: monitor
            platform: android-386
            os: android
            arch: 386
            cgo: true
            api_level: 21
    
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Go
        uses: actions/setup-go@v4
        with:
          go-version: '1.24'

      - name: Setup Android NDK (for Android builds)
        if: matrix.cgo == true
        run: |
          mkdir -p $HOME/android-ndk
          wget https://dl.google.com/android/repository/android-ndk-r26d-linux.zip
          unzip -q android-ndk-r26d-linux.zip -d $HOME/android-ndk
          mv $HOME/android-ndk/android-ndk-r26d $HOME/android-ndk/ndk
          echo "NDK_ROOT=$HOME/android-ndk/ndk" >> $GITHUB_ENV
          echo "PATH=$PATH:$HOME/android-ndk/ndk/toolchains/llvm/prebuilt/linux-x86_64/bin" >> $GITHUB_ENV

      - name: Build binary
        run: |
          cd ${{ matrix.project }}
          mkdir -p build
          
          # ËÆæÁΩÆÊûÑÂª∫ÂèÇÊï∞
          if [ "${{ matrix.platform }}" = "android-arm64" ]; then
            export GOOS=android GOARCH=arm64 CGO_ENABLED=1
            export CC=aarch64-linux-android${{ matrix.api_level }}-clang CXX=aarch64-linux-android${{ matrix.api_level }}-clang++
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_android_arm64"
          elif [ "${{ matrix.platform }}" = "android-amd64" ]; then
            export GOOS=android GOARCH=amd64 CGO_ENABLED=1
            export CC=x86_64-linux-android${{ matrix.api_level }}-clang CXX=x86_64-linux-android${{ matrix.api_level }}-clang++
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_android_amd64"
          elif [ "${{ matrix.platform }}" = "android-arm7" ]; then
            export GOOS=android GOARCH=arm CGO_ENABLED=1 GOARM=7
            export CC=armv7a-linux-androideabi${{ matrix.api_level }}-clang CXX=armv7a-linux-androideabi${{ matrix.api_level }}-clang++
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_android_arm7"
          elif [ "${{ matrix.platform }}" = "android-arm6" ]; then
            export GOOS=android GOARCH=arm CGO_ENABLED=1 GOARM=6
            export CC=armv7a-linux-androideabi${{ matrix.api_level }}-clang CXX=armv7a-linux-androideabi${{ matrix.api_level }}-clang++
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_android_arm6"
          elif [ "${{ matrix.platform }}" = "android-arm5" ]; then
            export GOOS=android GOARCH=arm CGO_ENABLED=1 GOARM=5
            export CC=armv7a-linux-androideabi${{ matrix.api_level }}-clang CXX=armv7a-linux-androideabi${{ matrix.api_level }}-clang++
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_android_arm5"
          elif [ "${{ matrix.platform }}" = "android-386" ]; then
            export GOOS=android GOARCH=386 CGO_ENABLED=1
            export CC=i686-linux-android${{ matrix.api_level }}-clang CXX=i686-linux-android${{ matrix.api_level }}-clang++
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_android_386"
          elif [ "${{ matrix.platform }}" = "linux-amd64" ]; then
            export GOOS=linux GOARCH=amd64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_amd64"
          elif [ "${{ matrix.platform }}" = "linux-arm64" ]; then
            export GOOS=linux GOARCH=arm64 CGO_ENABLED=0
            export GOARM=7
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_arm64"
          elif [ "${{ matrix.platform }}" = "linux-386" ]; then
            export GOOS=linux GOARCH=386 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_386"
          elif [ "${{ matrix.platform }}" = "linux-arm7" ]; then
            export GOOS=linux GOARCH=arm CGO_ENABLED=0 GOARM=7
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_arm7"
          elif [ "${{ matrix.platform }}" = "linux-arm6" ]; then
            export GOOS=linux GOARCH=arm CGO_ENABLED=0 GOARM=6
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_arm6"
          elif [ "${{ matrix.platform }}" = "linux-arm5" ]; then
            export GOOS=linux GOARCH=arm CGO_ENABLED=0 GOARM=5
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_arm5"
          elif [ "${{ matrix.platform }}" = "linux-loong64" ]; then
            export GOOS=linux GOARCH=loong64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_loong64"
          elif [ "${{ matrix.platform }}" = "linux-mips" ]; then
            export GOOS=linux GOARCH=mips CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_mips"
          elif [ "${{ matrix.platform }}" = "linux-mips64" ]; then
            export GOOS=linux GOARCH=mips64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_mips64"
          elif [ "${{ matrix.platform }}" = "linux-mips64le" ]; then
            export GOOS=linux GOARCH=mips64le CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_mips64le"
          elif [ "${{ matrix.platform }}" = "linux-mipsle" ]; then
            export GOOS=linux GOARCH=mipsle CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_mipsle"
          elif [ "${{ matrix.platform }}" = "linux-ppc64" ]; then
            export GOOS=linux GOARCH=ppc64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_ppc64"
          elif [ "${{ matrix.platform }}" = "linux-ppc64le" ]; then
            export GOOS=linux GOARCH=ppc64le CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_ppc64le"
          elif [ "${{ matrix.platform }}" = "linux-riscv64" ]; then
            export GOOS=linux GOARCH=riscv64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_riscv64"
          elif [ "${{ matrix.platform }}" = "linux-s390x" ]; then
            export GOOS=linux GOARCH=s390x CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_linux_s390x"
          elif [ "${{ matrix.platform }}" = "darwin-amd64" ]; then
            export GOOS=darwin GOARCH=amd64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_darwin_amd64"
          elif [ "${{ matrix.platform }}" = "darwin-arm64" ]; then
            export GOOS=darwin GOARCH=arm64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_darwin_arm64"
          elif [ "${{ matrix.platform }}" = "windows-amd64" ]; then
            export GOOS=windows GOARCH=amd64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_windows_amd64.exe"
          elif [ "${{ matrix.platform }}" = "windows-arm64" ]; then
            export GOOS=windows GOARCH=arm64 CGO_ENABLED=0
            export GOARM=7
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_windows_arm64.exe"
          elif [ "${{ matrix.platform }}" = "windows-386" ]; then
            export GOOS=windows GOARCH=386 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_windows_386.exe"
          elif [ "${{ matrix.platform }}" = "windows-arm7" ]; then
            export GOOS=windows GOARCH=arm CGO_ENABLED=0 GOARM=7
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_windows_arm7.exe"
          elif [ "${{ matrix.platform }}" = "windows-arm6" ]; then
            export GOOS=windows GOARCH=arm CGO_ENABLED=0 GOARM=6
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_windows_arm6.exe"
          elif [ "${{ matrix.platform }}" = "windows-arm5" ]; then
            export GOOS=windows GOARCH=arm CGO_ENABLED=0 GOARM=5
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_windows_arm5.exe"
          elif [ "${{ matrix.platform }}" = "freebsd-amd64" ]; then
            export GOOS=freebsd GOARCH=amd64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_freebsd_amd64"
          elif [ "${{ matrix.platform }}" = "freebsd-arm64" ]; then
            export GOOS=freebsd GOARCH=arm64 CGO_ENABLED=0
            export GOARM=7
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_freebsd_arm64"
          elif [ "${{ matrix.platform }}" = "freebsd-386" ]; then
            export GOOS=freebsd GOARCH=386 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_freebsd_386"
          elif [ "${{ matrix.platform }}" = "freebsd-arm7" ]; then
            export GOOS=freebsd GOARCH=arm CGO_ENABLED=0 GOARM=7
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_freebsd_arm7"
          elif [ "${{ matrix.platform }}" = "freebsd-arm6" ]; then
            export GOOS=freebsd GOARCH=arm CGO_ENABLED=0 GOARM=6
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_freebsd_arm6"
          elif [ "${{ matrix.platform }}" = "freebsd-arm5" ]; then
            export GOOS=freebsd GOARCH=arm CGO_ENABLED=0 GOARM=5
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_freebsd_arm5"
          elif [ "${{ matrix.platform }}" = "freebsd-riscv64" ]; then
            export GOOS=freebsd GOARCH=riscv64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_freebsd_riscv64"
          elif [ "${{ matrix.platform }}" = "netbsd-amd64" ]; then
            export GOOS=netbsd GOARCH=amd64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_netbsd_amd64"
          elif [ "${{ matrix.platform }}" = "netbsd-arm64" ]; then
            export GOOS=netbsd GOARCH=arm64 CGO_ENABLED=0
            export GOARM=7
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_netbsd_arm64"
          elif [ "${{ matrix.platform }}" = "netbsd-386" ]; then
            export GOOS=netbsd GOARCH=386 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_netbsd_386"
          elif [ "${{ matrix.platform }}" = "netbsd-arm7" ]; then
            export GOOS=netbsd GOARCH=arm CGO_ENABLED=0 GOARM=7
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_netbsd_arm7"
          elif [ "${{ matrix.platform }}" = "netbsd-arm6" ]; then
            export GOOS=netbsd GOARCH=arm CGO_ENABLED=0 GOARM=6
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_netbsd_arm6"
          elif [ "${{ matrix.platform }}" = "netbsd-arm5" ]; then
            export GOOS=netbsd GOARCH=arm CGO_ENABLED=0 GOARM=5
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_netbsd_arm5"
          elif [ "${{ matrix.platform }}" = "openbsd-amd64" ]; then
            export GOOS=openbsd GOARCH=amd64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_openbsd_amd64"
          elif [ "${{ matrix.platform }}" = "openbsd-arm64" ]; then
            export GOOS=openbsd GOARCH=arm64 CGO_ENABLED=0
            export GOARM=7
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_openbsd_arm64"
          elif [ "${{ matrix.platform }}" = "openbsd-386" ]; then
            export GOOS=openbsd GOARCH=386 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_openbsd_386"
          elif [ "${{ matrix.platform }}" = "openbsd-arm7" ]; then
            export GOOS=openbsd GOARCH=arm CGO_ENABLED=0 GOARM=7
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_openbsd_arm7"
          elif [ "${{ matrix.platform }}" = "openbsd-arm6" ]; then
            export GOOS=openbsd GOARCH=arm CGO_ENABLED=0 GOARM=6
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_openbsd_arm6"
          elif [ "${{ matrix.platform }}" = "openbsd-arm5" ]; then
            export GOOS=openbsd GOARCH=arm CGO_ENABLED=0 GOARM=5
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_openbsd_arm5"
          elif [ "${{ matrix.platform }}" = "openbsd-ppc64" ]; then
            export GOOS=openbsd GOARCH=ppc64 CGO_ENABLED=0
            BINARY_NAME="unlock-${{ matrix.project == 'cli' && 'test' || 'monitor' }}_openbsd_ppc64"
          else
            echo "‚ùå Unsupported platform: ${{ matrix.platform }}"
            exit 1
          fi
          
          # ÊûÑÂª∫Ê†áÂøó
          FLAGS="-w -s"
          if [ "${{ matrix.project }}" = "monitor" ]; then
            FLAGS="$FLAGS -X 'main.buildTime=$(date '+%Y-%m-%d %H:%M:%SZ')'"
          fi
          
          # ÊâßË°åÊûÑÂª∫
          echo "üî® Building ${{ matrix.project }} for ${{ matrix.platform }}..."
          echo "Environment: GOOS=$GOOS, GOARCH=$GOARCH, CGO_ENABLED=$CGO_ENABLED"
          if [ "$GOARM" != "" ]; then
            echo "GOARM=$GOARM"
          fi
          
          if [ "${{ matrix.cgo }}" = "true" ]; then
            go build -tags netcgo -ldflags="$FLAGS" -o "build/$BINARY_NAME" .
          else
            go build -ldflags="$FLAGS" -o "build/$BINARY_NAME" .
          fi
          
          echo "‚úÖ Built: $BINARY_NAME"
          ls -la build/

      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: ${{ matrix.project }}-${{ matrix.platform }}
          path: ${{ matrix.project }}/build/
          retention-days: 1

  # ÂèëÂ∏ÉÈò∂ÊÆµ
  release:
    needs: build
    runs-on: ubuntu-latest
    
    permissions:
      contents: write
      actions: read
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          fetch-depth: 0

      - name: Set up Go
        uses: actions/setup-go@v4
        with:
          go-version: '1.24'

      - name: Download all artifacts
        uses: actions/download-artifact@v4
        with:
          path: artifacts/

      - name: Upload to release
        run: |
          echo "üì§ Uploading all binaries to release..."
          
          # ÈÅçÂéÜÊâÄÊúâ‰∏ãËΩΩÁöÑartifacts
          for artifact_dir in artifacts/*/; do
            if [ -d "$artifact_dir" ]; then
              echo "Processing $artifact_dir"
              for file in "$artifact_dir"*; do
                if [ -f "$file" ]; then
                  filename=$(basename "$file")
                  echo "Uploading $filename..."
                  
                  response=$(curl -s --fail --retry 3 --retry-delay 0 -X POST \
                    -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
                    -H "Content-Type: application/octet-stream" \
                    --data-binary "@$file" \
                    "https://uploads.github.com/repos/${{ github.repository }}/releases/${{ github.event.release.id }}/assets?name=$filename")
                  
                  if [ $? -eq 0 ]; then
                    echo "‚úÖ Successfully uploaded $filename"
                  else
                    echo "‚ùå Failed to upload $filename: $response"
                    exit 1
                  fi
                fi
              done
            fi
          done
          
          echo "üéâ All binaries uploaded successfully!"

      - name: Build Summary
        run: |
          echo "üìä Build Summary:"
          echo "=================="
          echo "Total artifacts downloaded:"
          ls -la artifacts/
          echo "=================="
          echo "üéØ Release build and upload completed successfully!"
